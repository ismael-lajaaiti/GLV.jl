<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Interactions structure species responses · GLV.jl</title><meta name="title" content="Interactions structure species responses · GLV.jl"/><meta property="og:title" content="Interactions structure species responses · GLV.jl"/><meta property="twitter:title" content="Interactions structure species responses · GLV.jl"/><meta name="description" content="Documentation for GLV.jl."/><meta property="og:description" content="Documentation for GLV.jl."/><meta property="twitter:description" content="Documentation for GLV.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">GLV.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../cavity/">The cavity method</a></li><li class="is-active"><a class="tocitem" href>Interactions structure species responses</a></li><li><a class="tocitem" href="../functional-extinctions/">Functional extinctions</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Interactions structure species responses</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Interactions structure species responses</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ismael-lajaaiti/GLV.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ismael-lajaaiti/GLV.jl/blob/main/docs/src/response-to-pulse.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="How-biotic-interactions-structure-species-responses-to-pulse-perturbations"><a class="docs-heading-anchor" href="#How-biotic-interactions-structure-species-responses-to-pulse-perturbations">How biotic interactions structure species responses to pulse perturbations</a><a id="How-biotic-interactions-structure-species-responses-to-pulse-perturbations-1"></a><a class="docs-heading-anchor-permalink" href="#How-biotic-interactions-structure-species-responses-to-pulse-perturbations" title="Permalink"></a></h1><p>We will study how interactions between species shape their responses to perturbations, inspired by this study (<a href="../references/#lajaaiti2024">Lajaaiti <em>et al.</em>, 2024</a>). In particular, we are going to show that the sensitivity of species to perturbations is strongly related to their relative yield. Species relative yield is the ratio of the species abundance in the community over the species abundance when alone (that is, its carrying capacity). Thus, the relative yield captures the impact of interactions on species equilibrium abundance.</p><p>First, let&#39;s import the packages we need.</p><pre><code class="language-julia hljs">using GLV
using LinearAlgebra
using DataFrames
using Distributions
using CairoMakie
set_theme!(theme_minimal())</code></pre><p>Then, let&#39;s create a random competitive community.</p><pre><code class="language-julia hljs">S = 30
mu, sigma = -1, 0.2
K_std = 0.3
c = rand(
    Community,
    S;
    A_ij = Normal(mu / S, sigma / sqrt(S)),
    K_i = Normal(1, K_std),
    interaction = :core,
)
N_eq = abundance(c)
eta_eq = relative_yield(c)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">30-element Vector{Float64}:
 0.5683616417262094
 0.5044647597437871
 0.5903872847001225
 0.49909520819176406
 0.752658451640971
 0.5700535763854762
 0.47182488254129445
 0.5110607835251811
 0.3916495242571943
 0.5418132223355325
 ⋮
 0.5481093843050476
 0.5125991412571747
 0.3879480380906623
 0.516876475145059
 0.48499760197117064
 0.4790930994910111
 0.5618675675229576
 0.5543225085805519
 0.3851082770967621</code></pre><p>We can check the equilibrium of the community, and ensure that all species have a positive abundance.</p><p>Next, we will perform a series of random pulse perturbations and record each species responses. But before that, let&#39;s define how we quantify species responses to perturbations.</p><pre><code class="language-julia hljs">&quot;&quot;&quot;
    species_responses(sol)

Quantify how strongly each species responds to the simulated perturbation,
whose trajectory is given by `sol`.
The species response is its summed relative deviation from its equilibrium over its recovery.
&quot;&quot;&quot;
function species_response(sol, N_eq)
    dist_to_eq = abs.(Array(sol) .- N_eq) ./ N_eq
    mean(dist_to_eq; dims = 2)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main.var&quot;Main&quot;.species_response</code></pre><p>We can now simulate the species responses to pulse perturbations.</p><pre><code class="language-julia hljs">tspan = (0, 1_000)
n_pulses = 100
df = DataFrame(; species = Int64[], response = Float64[])
for _ in 1:n_pulses
    x = rand(Normal(0, 0.1), S) .* N_eq
    sol = simulate_pulse(c, x, tspan; saveat = 1)
    responses = species_response(sol, N_eq)
    for i in 1:S
        push!(df, (i, responses[i]))
    end
end</code></pre><p>We then average the species responses over all the pulse realizations, and add the species abundances and relative yields to the dataframe. This last step is not necessary, but it will allow us to plot the results.</p><pre><code class="language-julia hljs">df = combine(groupby(df, :species), :response =&gt; mean)
df.abundance = N_eq
df.relative_yield = eta_eq</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">30-element Vector{Float64}:
 0.5683616417262094
 0.5044647597437871
 0.5903872847001225
 0.49909520819176406
 0.752658451640971
 0.5700535763854762
 0.47182488254129445
 0.5110607835251811
 0.3916495242571943
 0.5418132223355325
 ⋮
 0.5481093843050476
 0.5125991412571747
 0.3879480380906623
 0.516876475145059
 0.48499760197117064
 0.4790930994910111
 0.5618675675229576
 0.5543225085805519
 0.3851082770967621</code></pre><p>Lastly, we can plot the results. We see that relative yield, instead of species abundance, strongly control the species responses to pulse perturbations. Specifically, species with low relative yield are the species that are the most sensitive to pulse perturbations.</p><pre><code class="language-julia hljs">fig = Figure();
ax1 = Axis(
    fig[1, 1];
    ylabel = &quot;Species response to pulse&quot;,
    xlabel = &quot;Species relative yield&quot;,
    yscale = log10,
)
scatter!(df.relative_yield, df.response_mean)
ax2 = Axis(fig[1, 2]; xlabel = &quot;Species abundance&quot;, yscale = log10)
scatter!(df.abundance, df.response_mean)
fig</code></pre><img src="ccdb8e97.png" alt="Example block output"/><p>If you want to learn more about this, I invite you to read the study (<a href="../references/#lajaaiti2024">Lajaaiti <em>et al.</em>, 2024</a>).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../cavity/">« The cavity method</a><a class="docs-footer-nextpage" href="../functional-extinctions/">Functional extinctions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Wednesday 11 September 2024 08:26">Wednesday 11 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
